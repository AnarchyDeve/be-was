# HTTP 기초 정리

## 1. 프로토콜과 IP
- **프로토콜:** 컴퓨터나 기기들이 서로 통신하기 위해 미리 정해놓은 '통신 규칙과 절차의 체계'. 데이터 형식, 전송 방법, 오류 처리 등을 정의하는 일종의 '약속'.
- **IP 프로토콜:** IP 주소로 일단 전달하며, 상대가 받았는지는 확인하지 않음.

### IP 프로토콜의 한계
- **비연결성:** 패킷을 받을 대상이 없거나 서비스 불능 상태여도 패킷 전송.
- **비신뢰성:** 중간에 패킷이 사라지거나 순서대로 오지 않으면 문제 발생.
- **프로그램 구분:** 같은 IP를 사용하는 서버에서 애플리케이션이 둘 이상이면 구분이 안 됨.

---

## 2. 인터넷 프로토콜 스택 4계층
1. **애플리케이션 계층:** HTTP, FTP (웹브라우저, 게임, 채팅 등 SOCKET 라이브러리 이용)
2. **인터넷 계층:** IP
3. **전송 계층 (OS):** TCP, UDP
4. **네트워크 인터페이스 계층:** LAN 드라이버, LAN 장비

### 프로토콜 전달 과정
1. 애플리케이션에서 메시지 생성
2. SOCKET 라이브러리(HTTP 등)를 사용해 전달
3. TCP 정보 생성 (메시지 데이터 포함)
4. IP 패킷 생성 (TCP 데이터 포함)

---

## 3. TCP와 UDP

### TCP (전송 제어 프로토콜) 특징
- **연결지향:** TCP 3-way handshake (가상 연결)
  1. 클라이언트 `SYN` -> 서버
  2. 서버 `SYN + ACK` -> 클라이언트
  3. 클라이언트 `ACK` -> 서버
- **신뢰성:** 데이터 전달 보증, 순서 보장.

### UDP (사용자 데이터그램 프로토콜) 특징
- **하얀 도화지에 비유:** 기능이 거의 없음.
- **비연결성:** 데이터 전달 및 순서 보장 X.
- **장점:** 단순하고 빠름. IP와 거의 같지만 **PORT + 체크섬** 정도만 추가됨. 애플리케이션에서 추가 작업 필요 시 사용.

---

## 4. PORT, DNS, URI

### PORT (포트)
- 하나의 컴퓨터에서 여러 개의 애플리케이션을 확인하기 위한 번호.
- **잘 알려진 포트:** - FTP(20, 21), TELNET(23), HTTP(80), HTTPS(443)
- **8080 포트를 쓰는 이유:** 관습적으로 80을 두 번 씀. 또한 1024 이하는 시스템 포트라 사용이 제한됨.

### DNS & URI
- **DNS:** 어려운 IP 주소 대신 도메인 이름을 IP 주소로 변환해주는 시스템.
- **URI:** 식별자이며 URL(위치)과 URN(이름)을 포함함.
- **URL 문법:** `scheme://[userinfo@]host:[:port][/path][?query][#fragment]`
  - 예: `https://www.naver.com:443/search?q=hi&hl=ko`
  - `fragment`: HTML 내부 북마크 등에 사용되며 **서버에 전송되지 않음.**

---

## 5. HTTP 특징

### 무상태 프로토콜 (Stateless)
- 서버가 클라이언트의 상태를 보존하지 않음.
- **장점:** 서버 확장성 높음 (스케일 아웃 가능).
- **단점:** 클라이언트가 추가 데이터를 매번 전송해야 함.
- **실무 한계:** 로그인이 필요한 서비스는 브라우저 **쿠키와 서버 세션** 등을 사용해 최소한으로 상태 유지.

### 비연결성 (Non-connection)
- 연결을 유지하지 않아 서버 자원을 효율적으로 사용.
- **한계:** 3-way handshake 시간 추가 발생, 다수의 자원 다운로드 시 비효율.
- **해결:** **HTTP 지속 연결**로 해결 (HTTP/2 멀티플렉싱 기술로 하나의 통로를 지속적으로 사용).

---

## 6. HTTP 메시지 구조

### 시작 라인 (Start-line)
- **요청 메시지:** `request-line = method SP request-target SP HTTP-version CRLF`
  - 예: `GET /search?q=hello HTTP/1.1`
- **응답 메시지:** `status-line = HTTP-version SP status-code SP reason-phrase CRLF`
  - 예: `HTTP/1.1 200 OK`

### HTTP 헤더
- `header-field = field-name ":" OWS field-value OWS`
- 대소문자 구분 없음. 앞뒤 공백(OWS) 허용.
- **Content-Type:** 데이터 형식 (html은 텍스트만 가져오게 됨).
- **Content-Length:** 바디의 바이트 크기.

### HTTP 메시지 바디
- 실제 전송할 데이터 (JSON 등 다양한 형태 가능).

---

## 7. 쿠키, 세션, 토큰(JWT)

- **쿠키:** 서버가 사용자 브라우저에 저장하는 작은 공간. 사용자 컴퓨터(디스크/메모리)에 저장되어 '아이디 저장' 등에 쓰이지만, 사용자가 직접 수정 가능해 보안에 취약함.
- **세션:** 서버가 로그인 상태를 직접 관리하는 식별자. 중요한 정보를 서버 메모리에 보관하여 보안성이 뛰어나지만, 접속자가 많아지면 서버 메모리에 부담을 줌.
- **토큰(JWT):** 서버가 발행하는 '비밀 인증서'. 서버는 토큰을 따로 저장하지 않고 비밀키로 진위 여부만 검증함. 수명이 짧은 **'액세스 토큰'**과 재발급용 **'리프레시 토큰'**으로 관리하는 것이 표준.